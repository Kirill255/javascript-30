<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Speech Synthesis</title>
  <link href='https://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="voiceinator">
    <h1>The Voiceinator 5000</h1>

    <select name="voice" id="voices">
      <option value="">Select A Voice</option>
    </select>

    <label for="rate">Rate:</label>
    <input name="rate" type="range" min="0" max="3" value="1" step="0.1">

    <label for="pitch">Pitch:</label>
    <input name="pitch" type="range" min="0" max="2" step="0.1">

    <textarea name="text">Hello! I love JavaScript üëç</textarea>

    <button id="stop">Stop!</button>
    <button id="speak">Speak</button>
  </div>

  <script>
    // https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesis -> –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Å–ª—É–∂–±—ã —Ä–µ—á–∏
    // https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance -> –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —á—Ç–æ –∏ –∫–∞–∫ –Ω—É–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å
    // –ø–æ –∏—Ç–æ–≥—É –º—ã —Å–æ–∑–¥–∞–¥–∏–º –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏, –Ω–∞—Å—Ç—Ä–æ–∏–º –∏—Ö, –∏ –ø–æ—Ç–æ–º –ø–µ—Ä–µ–¥–∞–¥–∏–º —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤ SpeechSynthesis –¥–ª—è –æ–∑–≤—É—á–∏–≤–∞–Ω–∏—è
    const synth = window.speechSynthesis;
    const msg = new SpeechSynthesisUtterance();
    let voices = [];
    const voicesDropdown = document.querySelector('[name="voice"]');
    const options = document.querySelectorAll('[type="range"], [name="text"]');
    const speakButton = document.querySelector('#speak');
    const stopButton = document.querySelector('#stop');

    // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è
    msg.text = document.querySelector("[name='text']").value;

    function populateVoices(e) {
      voices = this.getVoices(); // synth.getVoices(); // –ø–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤
      console.log(voices);
      // –∑–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞—à voicesDropdown
      voicesDropdown.innerHTML = voices
        .filter(voice => voice.lang.includes("en")) // –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –º–æ–∂–µ–º –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ –≥–æ–ª–æ—Å–∞, –º—ã –∂–µ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ en
        .map(voice => `<option value="${voice.name}">${voice.name} (${voice.lang})</option>`)
        .join("");
    }

    function setVoice(e) {
      // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –ø—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏—è —Ä–µ—á–∏
      console.log(this.value);
      // –Ω–∞ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–º–µ–Ω–Ω–æ –æ–±—ä–µ–∫—Ç –≥–æ–ª–æ—Å–∞ https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisVoice, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ(this.value)
      // console.log(voices.find(voice => voice.name === this.value));
      msg.voice = voices.find(voice => voice.name === this.value);
      toggle(); // –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Ä–µ—á—å —Å –Ω–æ–≤—ã–º –≤—ã–±—Ä–∞–Ω–Ω—ã–º –≥–æ–ª–æ—Å–æ–º
    }

    function toggle(startOver = true) {
      speechSynthesis.cancel(); // –∑–∞–≤–µ—Ä—à–∞–µ–º —Ä–µ—á—å –ø—Ä–æ–∏–∑–Ω–æ—Å–∏–º—É—é –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è
      // –µ—Å–ª–∏ –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —Ñ–ª–∞–≥ false, —Ç–æ —ç—Ç–∞ —á–∞—Å—Ç—å –∫–æ–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, —ç—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏ stop
      if (startOver) {
        speechSynthesis.speak(msg); // –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –Ω–æ–≤—É—é
      }
    }

    function setOption() {
      console.log(this.name, this.value); // rate - —Å–∫–æ—Ä–æ—Å—Ç—å, pitch - –≤—ã—Å–æ—Ç–∞ –≥–æ–ª–æ—Å–∞(–Ω–∏–∑–∫–∏–π->–≥—Ä—É–±—ã–π/–≤—ã—Å–æ–∫–∏–π->–ø–∏—Å–∫–ª—è–≤—ã–π), text - —Ç–µ–∫—Å—Ç —Ä–µ—á–∏
      msg[this.name] = this.value;
      toggle(); // –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Ä–µ—á—å —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
    }

    // –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Ç–æ–µ—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫–æ–π-—Ç–æ js, –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤ –≤–∞—à–µ–π OS, –≤–æ—Ç –∫–æ–≥–¥–∞ —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—Å—è, —Ç–æ–≥–¥–∞ –≤—ã–∑–æ–≤–µ—Ç—Å—è —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≥—Ä—É–±–æ –≥–æ–≤–æ—Ä—è –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ –≤—Å—ë –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ, —Å–∞–º —Å–ø–∏—Å–æ–∫ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –º–µ—Ç–æ–¥–æ–º speechSynthesis.getVoices(), –Ω–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –æ–Ω –≥–æ—Ç–æ–≤, –≤–æ—Ç –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –∏ –Ω—É–∂–Ω–æ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ
    synth.addEventListener("voiceschanged", populateVoices);
    voicesDropdown.addEventListener("change", setVoice); // –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –¥—Ä—É–≥–æ–≥–æ –≥–æ–ª–æ—Å–∞, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –µ–≥–æ –≤ –æ–±—ä–µ–∫—Ç —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
    options.forEach(option => option.addEventListener("change", setOption)); // —Ä–µ–≥—É–ª–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω–ø—É—Ç–∞–º–∏
    speakButton.addEventListener("click", toggle);
    stopButton.addEventListener("click", () => toggle(false));
  </script>
</body>

</html>

<!--
–ò–∑ –¥–æ–∫–∏ "–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏ –º–æ–≥—É—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç–∏"
–≤ –æ–±—â–µ–º –æ–¥–Ω–∏ –≥–æ–ª–æ—Å–∞ –º–æ–≥—É—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è –Ω–∞–ø—Ä–∏–º–µ—Ä –º–∞–∫—Å–∏–º—É–º –Ω–∞ x3 —Å–∫–æ—Ä–æ—Å—Ç–∏, —Ç–æ –¥—Ä—É–≥–∏–µ –º–æ–≥—É—Ç –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–∞–∫—Å–∏–º—É–º –Ω–∞ x2

ps.: –µ—â—ë –≤—Ä–æ–¥–µ –±—ã –µ—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –±–∞–≥–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≥–æ–ª–æ—Å–∞, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω—É–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≥–æ–ª–æ—Å –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –≤–ª –≤—Ä–µ–º—è populateVoices()
-->
